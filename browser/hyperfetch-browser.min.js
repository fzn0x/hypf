!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("{}")):"function"==typeof define&&define.amd?define("hypf",["{}"],t):"object"==typeof exports?exports.hypf=t(require("{}")):e.hypf=t(e["{}"])}(self,(e=>(()=>{"use strict";var t={324:t=>{t.exports=e}},r={};function o(e){var n=r[e];if(void 0!==n)return n.exports;var i=r[e]={exports:{}};return t[e](i,i.exports,o),i.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};o.r(n),o.d(n,{default:()=>O,init:()=>j});var i=o(324),s=o.n(i);const a=2147483647,l="function"==typeof globalThis.AbortController,c="function"==typeof globalThis.ReadableStream,u="function"==typeof globalThis.WritableStream,f="function"==typeof globalThis.WebSocket,p="function"==typeof globalThis.RTCPeerConnection,d=(globalThis.FormData,void 0!==s()&&"node"===s().release.name),y=()=>l?o.g.abortController:null;function b(e,t,r){try{const o=e.statusText;r||(r=e.status||0===e.status?String(e.status):"Unknown Status Code");const n=`${r} ${o}`.trim(),i=n?`Status code: ${n}`:"An unknown error occurred",s=new Error(i);return s.name="HTTPError",s.code=r,s.request=t,s.response=e,s.isHypfError=!0,Object.setPrototypeOf(s,Object.getPrototypeOf(new Error)),s}catch(e){const t=new Error("An error occurred while creating the HTTP error object");return t.name="HTTPErrorCreationFailure",t.originalError=e,t.isHypfError=!0,t}}const h=(e,t)=>1e3*Math.pow(2,e)*t,g=e=>1e3*Math.random()*e;const m=(e="",t={backoff:h,jitter:!1,jitterFactor:1,backoffFactor:.3,timeout:a,method:"GET",retries:0,retryOnTimeout:!1,headers:{}},r,{baseUrl:n,hooks:i,debug:s,throwOnError:y}=Object.create(null))=>{return T=void 0,j=void 0,v=function*(){var T;try{(null==i?void 0:i.preRequest)&&i.preRequest(e,t),(null==i?void 0:i.preTimeout)&&i.preTimeout(e,t);const{method:s="GET",timeout:h=a,params:g,headers:m={},signal:j}=t,O=function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(r[o[n]]=e[o[n]])}return r}(t,["method","timeout","params","headers","signal"]),v=`${n||""}${e}`,w=new Headers(m),E=new TextEncoder;!w.get("Content-Length")&&r&&("string"==typeof r?w.set("Content-Length",String(E.encode(r).length)):(null===(T=w.get("Content-Length"))||void 0===T?void 0:T.includes("application/json"))&&w.set("Content-Length",String(E.encode(JSON.stringify(r)).length))),!w.get("Content-Type")&&r&&"object"==typeof r&&(((null==r?void 0:r.body)||r)instanceof FormData||w.set("Content-Type","application/json")),l&&(o.g.abortController=new AbortController,o.g.abortSignal=j||o.g.abortController.signal);const R=g?((e,t)=>{if(!t)return e;const r=new URL(e);return Object.entries(t).forEach((([e,t])=>r.searchParams.append(e,String(t)))),r.toString()})(v,g):v;c&&!u&&d&&(O.duplex="half"),!c&&u&&d&&(O.duplex="half"),c&&u&&d&&(O.duplex="half"),p&&d&&(O.duplex="half"),f&&d&&(O.duplex="half");const x=t.body instanceof FormData?t.body:0!==Object.keys(r).length?JSON.stringify(r):void 0,S=Object.assign(Object.assign({method:s,signal:l?o.g.abortSignal:null,headers:w},O),{body:x});x instanceof FormData&&S.headers.delete("Content-Type");const P=h&&l?setTimeout((()=>{o.g.abortController.abort(),(null==i?void 0:i.postTimeout)&&i.postTimeout(e,t)}),h):void 0,C=new Request(R,S),F=fetch(C);clearTimeout(P);const k=yield F,q=k.headers.get("content-type"),H=q&&q.includes("application/json")?yield k.json():yield k.text();if(!k.ok)throw b(k,C);return(null==i?void 0:i.postRequest)&&i.postRequest(e,t,r,[null,H]),y?new Response(q&&q.includes("application/json")?JSON.stringify(H):H,{headers:{"Content-Type":q||"text/plain"},status:k.status,statusText:k.statusText}):[null,H]}catch(o){if((null==i?void 0:i.postRequest)&&o instanceof Error&&i.postRequest(e,t,r,[o,null]),o instanceof Error){if("AbortError"!==o.name){if(t.retryOnTimeout&&"TimeoutError"===o.name&&t.retries&&t.retries>0){const o=t.jitter&&t.jitterFactor?g(t.jitterFactor):t.backoff?h(t.retries,t.backoffFactor?t.backoffFactor:.3):0;s&&console.warn(`Request timed out. Retrying in ${o}ms... (Remaining retries: ${t.retries})`),(null==i?void 0:i.preRetry)&&i.preRetry(e,t,t.retries,t.retries),yield new Promise((e=>setTimeout(e,o)));const[n,a]=yield m(e,Object.assign(Object.assign({},t),{retries:t.retries-1}),r);if((null==i?void 0:i.postRetry)&&i.postRetry(e,t,r,[n,a],t.retries,t.retries-1),y)throw n;return[n,a]}if(t.retries&&t.retries>0){const o=t.jitter&&t.jitterFactor?g(t.jitterFactor):t.backoff?h(t.retries,t.backoffFactor?t.backoffFactor:.3):0;s&&console.warn(`Request failed. Retrying in ${o}ms... (Remaining retries: ${t.retries})`),(null==i?void 0:i.preRetry)&&i.preRetry(e,t,t.retries,t.retries),yield new Promise((e=>setTimeout(e,o)));const[n,a]=yield m(e,Object.assign(Object.assign({},t),{retries:t.retries-1}),r);if((null==i?void 0:i.postRetry)&&i.postRetry(e,t,r,[n,a],t.retries,t.retries-1),y)throw n;return[n,a]}if(y)throw o;return[o,null]}console.error("Request aborted:",o)}if(y)throw o;return[o,null]}},new((O=void 0)||(O=Promise))((function(e,t){function r(e){try{n(v.next(e))}catch(e){t(e)}}function o(e){try{n(v.throw(e))}catch(e){t(e)}}function n(t){var n;t.done?e(t.value):(n=t.value,n instanceof O?n:new O((function(e){e(n)}))).then(r,o)}n((v=v.apply(T,j||[])).next())}));var T,j,O,v},T=(e,t="GET",r=Object.create(null),o=Object.create(null),n)=>(r.initOptions&&(n=r.initOptions),delete r.initOptions,m(e,Object.assign({method:t},r),o,n));function j(e="",t=Object.create(null)){if("undefined"==typeof fetch)throw new Error("This library is intended for use in the native `fetch()` supported environment only.");return e&&(t.baseUrl=e),{get:(e,r,o)=>T(e,"GET",r,o,t),post:(e,r,o)=>T(e,"POST",r,o,t),put:(e,r,o)=>T(e,"PUT",r,o,t),delete:(e,r,o)=>T(e,"DELETE",r,o,t),patch:(e,r,o)=>T(e,"PATCH",r,o,t),head:(e,r,o)=>T(e,"HEAD",r,o,t),options:(e,r,o)=>T(e,"OPTIONS",r,o,t),createHTTPMethod:T,createHTTPError:b,getAbortController:y}}const O={init:j};return n})()));
//# sourceMappingURL=hyperfetch-browser.min.js.map