!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("{}")):"function"==typeof define&&define.amd?define("hypf",["{}"],t):"object"==typeof exports?exports.hypf=t(require("{}")):e.hypf=t(e["{}"])}(self,(e=>(()=>{"use strict";var t={324:t=>{t.exports=e}},o={};function r(e){var n=o[e];if(void 0!==n)return n.exports;var i=o[e]={exports:{}};return t[e](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};r.r(n),r.d(n,{default:()=>v,init:()=>T});var i=r(324),s=r.n(i);const a=2147483647,l=.3,c=1,u="function"==typeof globalThis.AbortController,f="function"==typeof globalThis.ReadableStream,d="function"==typeof globalThis.WritableStream,p="function"==typeof globalThis.WebSocket,b="function"==typeof globalThis.RTCPeerConnection,y=(globalThis.FormData,void 0!==s()&&"node"===s().release.name),g=()=>u?r.g.abortController:null,h=(e,t)=>1e3*Math.pow(2,e)*t,m=e=>1e3*Math.random()*e;const j=(e="",t={},o,{baseUrl:n,hooks:i,debug:s,throwOnError:g}=Object.create(null))=>{return O=void 0,T=void 0,w=function*(){var O;const{method:T="GET",retries:v=0,backoff:w=h,jitter:R=!1,jitterFactor:x=c,backoffFactor:S=l,timeout:E=a,retryOnTimeout:C=!1,params:P,headers:F={},signal:k}=t,q=function(e,t){var o={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(o[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(o[r[n]]=e[r[n]])}return o}(t,["method","retries","backoff","jitter","jitterFactor","backoffFactor","timeout","retryOnTimeout","params","headers","signal"]);try{(null==i?void 0:i.preRequest)&&i.preRequest(e,t);const s=`${n}${e}`,a=new Headers(F),l=new TextEncoder;!a.get("Content-Length")&&o&&("string"==typeof o?a.set("Content-Length",String(l.encode(o).length)):(null===(O=a.get("Content-Length"))||void 0===O?void 0:O.includes("application/json"))&&a.set("Content-Length",String(l.encode(JSON.stringify(o)).length))),!a.get("Content-Type")&&o&&"object"==typeof o&&(((null==o?void 0:o.body)||o)instanceof FormData||a.set("Content-Type","application/json")),(null==i?void 0:i.preTimeout)&&i.preTimeout(e,t),u&&(r.g.abortController=new AbortController,r.g.abortSignal=k||r.g.abortController.signal);const c=E&&u?setTimeout((()=>{r.g.abortController.abort(),(null==i?void 0:i.postTimeout)&&i.postTimeout(e,t)}),E):void 0,h=P?((e,t)=>{if(!t)return e;const o=new URL(e);return Object.entries(t).forEach((([e,t])=>o.searchParams.append(e,String(t)))),o.toString()})(s,P):s;f&&!d&&y&&(q.duplex="half"),!f&&d&&y&&(q.duplex="half"),f&&d&&y&&(q.duplex="half"),b&&y&&(q.duplex="half"),p&&y&&(q.duplex="half");const m=t.body instanceof FormData?t.body:0!==Object.keys(o).length?JSON.stringify(o):void 0,j=Object.assign(Object.assign({method:T,signal:u?r.g.abortSignal:null,headers:a},q),{body:m});m instanceof FormData&&j.headers.delete("Content-Type");const v=fetch(h,j);clearTimeout(c);const w=yield v,R=w.headers.get("content-type"),x=R&&R.includes("application/json")?yield w.json():yield w.text();if(!w.ok)throw function(e,t){const o=`${e.status||0===e.status?e.status:""} ${e.statusText||""}`.trim(),r=new Error(o?`status code ${o}`:"an unknown error");return r.name="HTTPError",r.response=e,r.data=t,r}(w,x);return(null==i?void 0:i.postRequest)&&i.postRequest(e,t,o,[null,x]),g?x:[null,x]}catch(r){if((null==i?void 0:i.postRequest)&&r instanceof Error&&i.postRequest(e,t,o,[r,null]),r instanceof Error){if("AbortError"!==r.name){if(C&&"TimeoutError"===r.name&&v&&v>0){const r=R&&x?m(x):w(v,S||l);s&&console.warn(`Request timed out. Retrying in ${r}ms... (Remaining retries: ${v})`),(null==i?void 0:i.preRetry)&&i.preRetry(e,t,v,v),yield new Promise((e=>setTimeout(e,r)));const[n,a]=yield j(e,Object.assign(Object.assign({},t),{retries:v-1}),o);if((null==i?void 0:i.postRetry)&&i.postRetry(e,t,o,[n,a],v,v-1),g)throw n;return[n,a]}if(t.retries&&t.retries>0){const r=t.jitter&&t.jitterFactor?m(t.jitterFactor):w(t.retries,t.backoffFactor?t.backoffFactor:l);s&&console.warn(`Request failed. Retrying in ${r}ms... (Remaining retries: ${t.retries})`),(null==i?void 0:i.preRetry)&&i.preRetry(e,t,t.retries,t.retries),yield new Promise((e=>setTimeout(e,r)));const[n,a]=yield j(e,Object.assign(Object.assign({},t),{retries:t.retries-1}),o);if((null==i?void 0:i.postRetry)&&i.postRetry(e,t,o,[n,a],t.retries,t.retries-1),g)throw n;return[n,a]}if(g)throw r;return[r,null]}console.error("Request aborted:",r)}if(g)throw r;return[r,null]}},new((v=void 0)||(v=Promise))((function(e,t){function o(e){try{n(w.next(e))}catch(e){t(e)}}function r(e){try{n(w.throw(e))}catch(e){t(e)}}function n(t){var n;t.done?e(t.value):(n=t.value,n instanceof v?n:new v((function(e){e(n)}))).then(o,r)}n((w=w.apply(O,T||[])).next())}));var O,T,v,w},O=(e,t="GET",o=Object.create(null),r=Object.create(null),n)=>(o.initOptions&&(n=o.initOptions),delete o.initOptions,j(e,Object.assign({method:t},o),r,n));function T(e="",t=Object.create(null)){if("undefined"==typeof fetch)throw new Error("This library is intended for use in the browser environment only.");return e&&(t.baseUrl=e),{get:(e,o,r)=>O(e,"GET",o,r,t),post:(e,o,r)=>O(e,"POST",o,r,t),put:(e,o,r)=>O(e,"PUT",o,r,t),delete:(e,o,r)=>O(e,"DELETE",o,r,t),patch:(e,o,r)=>O(e,"PATCH",o,r,t),head:(e,o,r)=>O(e,"HEAD",o,r,t),options:(e,o,r)=>O(e,"OPTIONS",o,r,t),getAbortController:g}}const v={init:T};return n})()));
//# sourceMappingURL=hyperfetch-browser.min.js.map